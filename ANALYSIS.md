# NewsRSS 코드 분석

## 개요
NewsRSS는 Flask 기반 백엔드와 정적 프론트엔드로 구성된 단일 페이지 뉴스 검색 애플리케이션입니다. 백엔드는 Google News RSS 피드를 프록시하여 JSON으로 반환하고, 프론트엔드는 해당 API를 호출해 뉴스 카드를 렌더링합니다.

## 백엔드 (app.py)
- **라우팅**: `/` 엔드포인트는 검색 UI를 반환하고 `/api/news`는 검색어를 받아 RSS 피드에서 뉴스를 파싱해 JSON으로 응답합니다.【F:app.py†L9-L59】
- **외부 의존성**: `feedparser`로 RSS 피드를 파싱하며, `urllib.parse.quote`로 검색어를 URL 인코딩합니다.【F:app.py†L3-L19】
- **이미지 추출 로직**: `media_content`, `media_thumbnail`, `enclosures`, `summary` 순으로 이미지 URL을 탐색합니다. 정규식을 이용해 summary에서 `<img>` 태그를 찾아 Fallback을 제공합니다.【F:app.py†L23-L48】
- **응답 구조**: 성공 시 상태, 검색어, 총 개수, 뉴스 목록을 포함한 JSON을 반환하고 예외 발생 시 에러 메시지를 포함한 500 응답을 생성합니다.【F:app.py†L50-L64】
- **실행 설정**: 환경 변수로 포트와 디버그 모드를 제어하며, 기본 포트는 5001입니다.【F:app.py†L66-L69】

### 백엔드에서 발견된 이슈 및 개선점
1. **입력 검증 부족**: 검색어 길이나 문자 제한이 없고, 빈 문자열 처리도 프론트에만 의존합니다. 서버에서도 validation을 추가해 DoS 혹은 의도치 않은 요청을 방어할 수 있습니다.
2. **에러 핸들링 범위**: 모든 예외를 포괄적으로 잡고 문자열로 반환하므로, 사용자가 내부 예외 메시지를 직접 보게 됩니다. 사용자 친화적인 메시지와 로깅 분리를 고려할 수 있습니다.
3. **캐싱/레이트 리밋 없음**: 동일한 쿼리에 대해 매번 Google News에 요청하므로 API 호출 한도가 있을 경우 문제가 될 수 있습니다. 캐싱이나 rate limiting 도입을 검토해야 합니다.

## 프론트엔드 (templates/index.html & static/js/app.js)
- **UI 구성**: Bootstrap 기반 카드 레이아웃과 다크모드 토글, 로딩 스피너, 에러 메시지 영역 등으로 구성돼 있습니다.【F:templates/index.html†L1-L86】
- **기본 검색어**: 페이지 로드시 `performSearch('부정선거')`로 기본 검색을 실행합니다.【F:static/js/app.js†L16-L19】
- **검색 흐름**: 폼 제출 시 fetch API로 `/api/news`를 호출하고, 응답 상태에 따라 뉴스 카드 렌더링 혹은 에러 표시를 수행합니다.【F:static/js/app.js†L21-L74】
- **XSS 방지**: `escapeHtml`과 `stripHtmlTags`를 통해 텍스트 컨텐츠를 이스케이프하며, 이미지 로딩 실패 시 요소를 숨깁니다.【F:static/js/app.js†L95-L142】
- **UX 보조 기능**: 검색 결과로 자동 스크롤 이동, Ctrl/Cmd+K 단축키 포커스, placeholder 순환 등 사용자 경험을 개선하는 로직이 포함돼 있습니다.【F:static/js/app.js†L76-L123】【F:static/js/app.js†L145-L168】

### 프론트엔드에서 발견된 이슈 및 개선점
1. **기본 검색어 민감도**: 하드코딩된 기본 검색어(`부정선거`)가 민감할 수 있으므로 일반적인 키워드나 빈 상태로 두는 방안을 고려해야 합니다.
2. **에러 상태 상세화 부족**: 네트워크 에러와 API 실패 외의 상황에 대한 사용자 메시지가 제한적입니다.
3. **접근성**: 시각 효과가 많은 만큼 색 대비, 키보드 포커스 스타일 등을 추가로 검토할 필요가 있습니다.

## CLI 스크립트 (news.py)
간단한 실험용 스크립트로, 기본 쿼리를 이용해 Google News RSS에서 제목과 링크를 출력합니다.【F:news.py†L1-L9】 실서비스에는 포함되지 않지만 RSS 파싱 테스트용으로 보입니다.

## 보안 및 성능 고려사항
- **입력 검증**: 서버 측 검색어 길이 제한과 허용 문자 검증을 도입해야 합니다.
- **레이트 리밋/캐싱**: Google News 요청 남발을 방지하고 응답 속도를 개선할 수 있습니다.
- **HTTPS 및 비밀정보**: 현재 외부 API 키가 없으므로 별도 관리가 필요 없지만, 향후 추가 시 `.env` 파일과 환경 변수 관리가 필요합니다.

## 테스트 현황
프로젝트에는 자동화된 테스트나 정적 분석 설정이 없습니다. 기능 확장을 위해서는 Flask 뷰 함수에 대한 단위 테스트와 프론트엔드 E2E 혹은 컴포넌트 테스트 도입을 추천합니다.
